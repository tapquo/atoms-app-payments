/**
 * payments - atoms-app-payments i
 * @version v1.0.0
 * @link    http://tapquo.com
 * @author   ()
 * @license MIT
 */
(function(){"use strict";var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};Atoms.Molecule.Creditcard=function(_super){function Creditcard(){}var isNumber;return __extends(Creditcard,_super),Creditcard["extends"]=!0,Creditcard.events=["submit"],Creditcard["default"]={events:["submit"],children:[{"Atom.Input":{id:"name",type:"text",maxlength:16,placeholder:"Type your creditcard name...",events:["keyup"],required:!0}},{"Atom.Input":{id:"number",type:"number",maxlength:16,placeholder:"Type your creditcard number...",events:["keyup"],required:!0}},{"Atom.Input":{id:"month",type:"number",placeholder:"MM",min:1,max:12,events:["keyup"],required:!0}},{"Atom.Input":{id:"year",type:"number",placeholder:"YYYY",maxlength:4,events:["keyup"],required:!0}},{"Atom.Input":{id:"cvc",type:"number",placeholder:"CVC",maxlength:4,events:["keyup"],required:!0}},{"Atom.Button":{id:"submit",text:"Pay",events:["touch"],style:"fluid accept",disabled:!0}}]},Creditcard.prototype.onInputKeyup=function(event,atom){var checked,child,_i,_len,_ref,_ref1,_ref2;for(checked=!0,_ref=this.children,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],"Input"===child.constructor.base&&child.error(!1);return atom.value().trim,atom.value().replace(/\s+/g,""),16===this.number.value().length&&this.validateCreditCard(this.number.value())?isNumber(this.month.value())&&1<=(_ref1=this.month.value())&&12>=_ref1?isNumber(this.year.value())&&(new Date).getFullYear()<=this.year.value()?new Date>=new Date(this.year.value(),this.month.value(),1)?(checked=!1,this.year.value().length>0&&this.year.error(!0),this.month.value().length>0&&this.month.error(!0)):isNumber(this.cvc.value())&&0<=(_ref2=this.cvc.value())&&999>=_ref2?this.name.value().length<4&&(checked=!1,this.name.value().length>0&&this.name.error(!0)):(checked=!1,this.cvc.value().length>0&&this.cvc.error(!0)):(checked=!1,this.year.value().length>0&&this.year.error(!0)):(checked=!1,this.month.value().length>0&&this.month.error(!0)):(checked=!1,this.number.value().length>0&&this.number.error(!0)),checked?this.submit.el.removeAttr("disabled"):this.submit.el.attr("disabled",!0)},Creditcard.prototype.validateCreditCard=function(ccNumb){var bResult,calc,i,iCCN,iTotal,len,sCCN,valid;if(valid="0123456789",len=ccNumb.length,iCCN=parseInt(ccNumb),sCCN=ccNumb.toString(),sCCN=sCCN.replace(/^\s+|\s+$/g,"").trim(),iTotal=0,bResult=!1,isNumber(ccNumb)||(bResult=!1),0===len)bResult=!1;else if(len>=15){for(i=len;i>0;){switch(calc=parseInt(iCCN)%10,calc=parseInt(calc),iTotal+=calc,i--,iCCN/=10,calc=parseInt(iCCN)%10,calc=2*calc){case 10:calc=1;break;case 12:calc=3;break;case 14:calc=5;break;case 16:calc=7;break;case 18:calc=9;break;default:calc=calc}iCCN/=10,iTotal+=calc,i--}bResult=iTotal%10===0?!0:!1}return bResult},isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},Creditcard}(Atoms.Molecule.Form),Atoms.Molecule.Creditcard=function(_super){function Creditcard(){}var CODE_LENGTHS,isNumber;return __extends(Creditcard,_super),CODE_LENGTHS={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26},Creditcard["extends"]=!0,Creditcard.events=["submit"],Creditcard["default"]={events:["submit"],children:[{"Atom.Input":{id:"countrycode",type:"text",maxlength:2,placeholder:"Country code",events:["keyup"],required:!0}},{"Atom.Input":{id:"checkdigits",type:"number",maxlength:2,placeholder:"Check digits",events:["keyup"],required:!0}},{"Atom.Input":{id:"bankandoffice",type:"text",maxlength:30,placeholder:"Bank and office",events:["keyup"],required:!0}}]},Creditcard.prototype.onInputKeyup=function(event,atom){var checked,child,_i,_len,_ref;for(checked=!0,_ref=this.children,_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],"Input"===child.constructor.base&&child.error(!1);if(atom.value().trim,atom.value().replace(/\s+/g,""),console.log(CODE_LENGTHS[countrycode[1]]),2!==this.countrycode.value().length){if(checked=!1,this.countrycode.value().length>0)return this.countrycode.error(!0)}else if(2!==this.checkdigits.value().length){if(checked=!1,this.checkdigits.value().length>0)return this.checkdigits.error(!0)}else if(this.bankandoffice.value().length!==CODE_LENGTHS[countrycode[1]]&&(checked=!1,this.bankandoffice.value().length>0))return this.bankandoffice.error(!0)},Creditcard.prototype.validateIBAN=function(countrycode){var validIBAN;return validIBAN=!0,countrycode.toUpperCase().replace(/[^A-Z0-9]/g,"")},isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},Creditcard}(Atoms.Molecule.Form)}).call(this);